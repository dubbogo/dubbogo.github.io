<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="quick start, hellowworld, Provider" />
	<meta name="description" content="quickly start Dubbo-go and code a simple hellowworld application" />
	<!-- 网页标签标题 -->
	<title>Quick start</title>
	<link rel="shortcut icon" href="/img/dubbo.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/en-us/index.html"><img class="logo" src="/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/img/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="https://dubbo.apache.org/en/">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="https://dubbo.apache.org/en/">DOCS</a></li><li class="menu-item menu-item-normal"><a href="https://dubbo.apache.org/en/">BLOG</a></li><li class="menu-item menu-item-normal"><a href="https://dubbo.apache.org/en/">COMMUNITY</a></li><li class="menu-item menu-item-normal"><a href="https://dubbo.apache.org/en/">DOWNLOADS</a></li><li class="menu-item menu-item-normal"><a href="https://dubbo.apache.org/en/">JAVA</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/img/docs.png" class="front-img"/><span>Documentation</span><img src="/img/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>User Guide</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Preface<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/preface/architecture.html" target="_self">Architecture</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/quick-start.html" target="_self">Quick start</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Configuration<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/configuration/provider.html" target="_self">Provider</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Registry configuration reference<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/registry/introduction.html" target="_self">Introduction</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/registry/zookeeper.html" target="_self">Zookeeper registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/registry/nacos.html" target="_self">Nacos registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/registry/consul.html" target="_self">Consul registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/registry/etcdv3.html" target="_self">Etcdv3 registry</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>Developer guide</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/developer/design.html" target="_self">Design</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Source code guide</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/source_code/extension.html" target="_self">Extension</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>Quick start</h1>
<p>Let's take you to the Dubbo-go framework through a <code>hellowworld</code> example.</p>
<p>protocal: Dubbo<br>
coding: Hessian2<br>
registry: Zookeeper</p>
<h2>Environment</h2>
<ul>
<li>Go programming environment</li>
<li>Start zookeeper server, or use a remote instance of zookeeper</li>
</ul>
<h2>Start from the server</h2>
<h3>Step 1: coding the <code>Provider</code> struct and methods to provide service</h3>
<blockquote>
<p><a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/user.go">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/user.go</a></p>
</blockquote>
<ol>
<li>Coding the structure to be encoded, because <code>Hessian2</code> is used as the encoding protocol, <code>User</code> needs to implement the <code>JavaClassName</code> method, and its return value corresponds to the class name of User class in Dubbo.</li>
</ol>
<pre><code class="language-go"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
	Id   <span class="hljs-keyword">string</span>
	Name <span class="hljs-keyword">string</span>
	Age  <span class="hljs-keyword">int32</span>
	Time time.Time
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u User)</span> <span class="hljs-title">JavaClassName</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> {
	<span class="hljs-keyword">return</span> <span class="hljs-string">"com.ikurento.user.User"</span>
}
</code></pre>
<ol start="2">
<li>Coding the business logic, and <code>UserProvider</code> is equivalent to one of implementations of one service in Dubbo. It needs implement the <code>Reference</code> method whose return value is unique identification of this service, and return value corresponds to the <code>beans</code> and <code>path</code> fields of Dubbo.</li>
</ol>
<pre><code class="language-go"><span class="hljs-keyword">type</span> UserProvider <span class="hljs-keyword">struct</span> {
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u *UserProvider)</span> <span class="hljs-title">GetUser</span><span class="hljs-params">(ctx context.Context, req []<span class="hljs-keyword">interface</span>{})</span> <span class="hljs-params">(*User, error)</span></span> {
	<span class="hljs-built_in">println</span>(<span class="hljs-string">"req:%#v"</span>, req)
	rsp := User{<span class="hljs-string">"A001"</span>, <span class="hljs-string">"hellowworld"</span>, <span class="hljs-number">18</span>, time.Now()}
	<span class="hljs-built_in">println</span>(<span class="hljs-string">"rsp:%#v"</span>, rsp)
	<span class="hljs-keyword">return</span> &amp;rsp, <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u *UserProvider)</span> <span class="hljs-title">Reference</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> {
	<span class="hljs-keyword">return</span> <span class="hljs-string">"UserProvider"</span>
}
</code></pre>
<ol start="3">
<li>Register services and objects</li>
</ol>
<pre><code class="language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> {
	config.SetProviderService(<span class="hljs-built_in">new</span>(UserProvider))
	<span class="hljs-comment">// ------for hessian2------</span>
	hessian.RegisterPOJO(&amp;User{})
}
</code></pre>
<h3>Step 2：Coding main program</h3>
<blockquote>
<p><a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/server.go">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/server.go</a></p>
</blockquote>
<ol>
<li>Import the required Dubbo-go package</li>
</ol>
<pre><code class="language-go"><span class="hljs-keyword">import</span> (
	hessian <span class="hljs-string">"github.com/apache/dubbo-go-hessian2"</span>
	<span class="hljs-string">"github.com/apache/dubbo-go/config"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/registry/protocol"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/common/proxy/proxy_factory"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/filter/impl"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/cluster/cluster_impl"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/cluster/loadbalance"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/registry/zookeeper"</span>

	_ <span class="hljs-string">"github.com/apache/dubbo-go/protocol/dubbo"</span>
)

</code></pre>
<ol start="2">
<li>main method</li>
</ol>
<pre><code class="language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	config.Load()
}
</code></pre>
<h3>Step 3：Coding configuration files and configure environment variables</h3>
<ol>
<li>Follow <a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/profiles/release/log.yml">log</a> and <a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/profiles/release/server.yml">server</a> to edit configuration files.</li>
</ol>
<p>Edit the following configurations:</p>
<ul>
<li>
<p>The number and address of zk to be configured under the node <code>registries</code>.</p>
</li>
<li>
<p>To configure the specific informations of the service under the node <code>services</code>, you need to configure the <code>interface</code> -- change it to the interface name of the corresponding service, and the key of service is return value of <code>Reference</code> method of <code>Provider</code> in Step 1.</p>
</li>
</ul>
<ol start="2">
<li>Configure the above two configuration files as environment variables</li>
</ol>
<pre><code class="language-shell">export CONF_PROVIDER_FILE_PATH="xxx"
export APP_LOG_CONF_FILE="xxx"
</code></pre>
<h2>The second is client</h2>
<h3>Step 1：coding the <code>Provider</code> of client</h3>
<blockquote>
<p><a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/user.go">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/user.go</a></p>
</blockquote>
<ol>
<li>
<p>Refer to the first point of step 1 in <code>Start from the server</code>.</p>
</li>
<li>
<p>Different from the server, methods to provide services are the parameters of the structure, and they don't need to code some special business logic。In addition, <code>Provider</code> does not correspond to the interface in Dubbo, but to an implementation.</p>
</li>
</ol>
<pre><code class="language-go"><span class="hljs-keyword">type</span> UserProvider <span class="hljs-keyword">struct</span> {
	GetUser <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, req []<span class="hljs-keyword">interface</span>{}, rsp *User)</span> <span class="hljs-title">error</span></span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u *UserProvider)</span> <span class="hljs-title">Reference</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> {
	<span class="hljs-keyword">return</span> <span class="hljs-string">"UserProvider"</span>
}
</code></pre>
<ol start="3">
<li>Register services and objects</li>
</ol>
<pre><code class="language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> {
	config.SetConsumerService(userProvider)
	hessian.RegisterPOJO(&amp;User{})
}
</code></pre>
<h3>Step 2：Coding main program of client</h3>
<blockquote>
<p><a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/client.go">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/client.go</a></p>
</blockquote>
<ol>
<li>Import the required Dubbo-go package</li>
</ol>
<pre><code class="language-go"><span class="hljs-keyword">import</span> (
	hessian <span class="hljs-string">"github.com/apache/dubbo-go-hessian2"</span>
	<span class="hljs-string">"github.com/apache/dubbo-go/config"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/registry/protocol"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/common/proxy/proxy_factory"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/filter/impl"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/cluster/cluster_impl"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/cluster/loadbalance"</span>
	_ <span class="hljs-string">"github.com/apache/dubbo-go/registry/zookeeper"</span>

	_ <span class="hljs-string">"github.com/apache/dubbo-go/protocol/dubbo"</span>
)
</code></pre>
<ol start="2">
<li>main method</li>
</ol>
<pre><code class="language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	config.Load()
	time.Sleep(<span class="hljs-number">3e9</span>)

	<span class="hljs-built_in">println</span>(<span class="hljs-string">"\n\n\nstart to test dubbo"</span>)
	user := &amp;User{}
	err := userProvider.GetUser(context.TODO(), []<span class="hljs-keyword">interface</span>{}{<span class="hljs-string">"A001"</span>}, user)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)
	}
	<span class="hljs-built_in">println</span>(<span class="hljs-string">"response result: %v\n"</span>, user)
}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">println</span><span class="hljs-params">(format <span class="hljs-keyword">string</span>, args ...<span class="hljs-keyword">interface</span>{})</span></span> {
	fmt.Printf(<span class="hljs-string">"\033[32;40m"</span>+format+<span class="hljs-string">"\033[0m\n"</span>, args...)
}
</code></pre>
<h3>Step 3：Coding configuration files and configure environment variables</h3>
<ol>
<li>Follow <a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/profiles/release/log.yml">log</a> and <a href="https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/profiles/release/client.yml">client</a> to edit configuration files.</li>
</ol>
<p>Edit the following configurations:</p>
<ul>
<li>
<p>The number and address of zk to be configured under the node <code>registries</code>.</p>
</li>
<li>
<p>To configure the specific informations of the service under the node <code>references</code>, you need to configure the <code>interface</code> -- change it to the interface name of the corresponding service, and the key of service is return value of <code>Reference</code> method of <code>Provider</code> in Step 1.</p>
</li>
</ul>
<ol start="2">
<li>Configure the above two configuration files as environment variables, in order to prevent the conflict between the log environment variables client and server, it is recommended that all the environment variables should not be configured globally, which will take effect at present.</li>
</ol>
<pre><code class="language-shell">export CONF_CONSUMER_FILE_PATH="xxx"
export APP_LOG_CONF_FILE="xxx"
</code></pre>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/img/dubbo_gray.png"/><img class="apache" src="/img/apache_logo.png"/><div class="cols-container"><div class="col col-12"><h3></h3><p></p></div><div class="col col-4"><dl><dt>ASF</dt><dd><a href="http://www.apache.org" target="_self">Foundation</a></dd><dd><a href="http://www.apache.org/licenses/" target="_self">License</a></dd><dd><a href="http://www.apache.org/events/current-event" target="_self">Events</a></dd><dd><a href="http://www.apache.org/foundation/sponsorship.html" target="_self">Sponsorship</a></dd><dd><a href="http://www.apache.org/foundation/thanks.html" target="_self">Thanks</a></dd></dl></div><div class="col col-4"><dl><dt>Documentation</dt><dd><a href="/en-us/docs/user/quick-start.html" target="_self">Quick start</a></dd><dd><a href="/en-us/docs/dev/build.html" target="_self">Developer guide</a></dd><dd><a href="/en-us/docs/admin/ops/dubbo-ops.html" target="_self">Admin manual</a></dd><dd><a href="https://github.com/dubbogo/dubbogo.github.io/issues/new" target="_self">Report a Doc Issue</a></dd><dd><a href="https://github.com/dubbogo/dubbogo.github.io" target="_self">Edit This Page on GitHub</a></dd></dl></div><div class="col col-4"><dl><dt>Resources</dt><dd><a href="/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/en-us/community/index.html" target="_self">Community</a></dd><dd><a href="https://www.apache.org/security/" target="_self">Security</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018-2020 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
  <script src="/build/documentation.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112489517-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-112489517-1');
	</script>
</body>
</html>